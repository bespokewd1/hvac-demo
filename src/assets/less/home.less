/*-- -------------------------- -->
<---        Why Choose Us       -->
<--- -------------------------- -*/

// Variables
@primary: var(--primary);
@sectionPadding: var(--sectionPadding);

/* Mobile - 360px */
#why-choose-us {
  padding: 1rem;
  position: relative;
  overflow: hidden;

  .cs-picture {
    display: contents;
    img {
      max-width: 200px;
      width: 100%;
      aspect-ratio: 1/1;
      object-fit: contain;
      height: auto;
    }
  }
  .cs-text {
    text-align: center;
    font-weight: 600;
  }

  .cs-container {
    width: 100%;
    max-width: 80rem;
    margin: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(3rem, 6vw, 4rem);
  }

  .cs-content {
    text-align: center;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;

    .cs-h3 {
      color: var(--headerColor);
    }
  }

  .trust-signals {
    display: grid;
    row-gap: (16/16rem);
    .trust-signals-contents {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    .trust-label {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
  }
}

@media only screen and (min-width: 577px) {
  #why-choose-us {
    padding: @sectionPadding;

    .trust-signals {
      grid-column: 1rem;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
    }
  }
}

/* laptop - 769px and up */
@media only screen and (min-width: 993px) {
  #why-choose-us {
    .trust-signals {
      // grid-column: 1rem;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: min-content;

      .trust-label {
        display: none;
      }
    }
  }
}

@media only screen and (min-width: 1201px) {
  #why-choose-us {
    .trust-signals {
      column-gap: 2rem;
    }
  }
}

@media only screen and (min-width: 80rem) {
  #why-choose-us {
  }
}

/*-- -------------------------- */
/*        Services (Ducts)      */
/*-- -------------------------- */

#services-ducts {
  padding: var(--sectionPadding);
  background: #fff;
  .cs-container {
    // width: 100%;
    // max-width: 80rem;
    // margin: 0 auto;
    width: 100%;
    max-width: 80rem;
    margin: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(3rem, 6vw, 4rem);
  }

  .cs-header {
    text-align: center;
    margin-bottom: 2rem;
    .cs-topper {
      color: var(--secondary);
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: inline-block;
      margin-bottom: 0.25rem;
    }
    .cs-title {
      color: var(--headerColor);
      margin: 0 0 1rem 0;
      font-weight: 800;
      line-height: 1.1;
    }
    .cs-intro {
      color: var(--bodyTextColor);
      max-width: 48rem;
      margin: 0 auto;
    }
  }

  /* Grid (≥768px) */
  .card-grid {
    display: none;
    list-style: none;
    padding: 0;
    margin: 0;
    gap: 1.25rem;
  }

  /* Shared card styles */
  .card {
    max-width: 500px;
    margin-inline: auto;
    background: #fff;
    border: 1px solid #e9e9e9;
    border-radius: 14px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition:
      transform 180ms ease,
      box-shadow 180ms ease,
      border-color 180ms ease;
    .card-media {
      display: block;
      margin: 0;
      img {
        display: block;
        width: 100%;
        height: 180px;
        object-fit: cover;
      }
    }
    .card-body {
      flex: 1;
      padding: 1rem 1rem 1.25rem;
      display: flex;
      flex-direction: column;
      // gap: 0.85rem;
    }
    .card-title {
      margin: 0 0 0.35rem;
      color: var(--headerColor);
      font-size: 1.125rem;
      line-height: 1.2;
    }
    .card-desc {
      margin: 0 0 0.85rem;
      color: var(--bodyTextColor);
      font-size: 0.975rem;
      line-height: 1.5;
    }
    &:hover {
      transform: translateY(-2px);
      border-color: #ddd;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
    }
  }

  .cs-button-outline {
    margin-top: auto;
    align-self: flex-start;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 0.9rem;
    border-radius: 999px;
    border: 1px solid var(--primary);
    color: var(--primary);
    font-weight: 600;
    text-decoration: none;
    transition:
      background-color 160ms ease,
      color 160ms ease,
      border-color 160ms ease;
    &:hover {
      background: var(--primary);
      color: #fff;

      .button-outline-icon {
        transform: translateX(0);
      }
    }

    .button-outline-icon {
      display: flex;
      transform: translateX(-25%);
      transition: transform 250ms ease;
    }
  }

  .cs-button-solid {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0 1.5rem;
    border-radius: 999px;
    color: #fff;
    text-decoration: none;
    font-weight: 700;
    background: var(--primary);
  }

  .cs-all-link {
    margin: 1.5rem auto 0;
    display: inline-flex;
  }

  /* Blaze slider container (≤767px) */
  .cards-slider {
    /* hidden on desktop */
    display: block;
    max-width: 100%;
    .blaze-track {
      /* nicer spacing */
      padding: 0.25rem 0;

      .blaze-slide {
        // max-width: 500px;
        // margin-inline: auto;
      }
    }
  }

  /* Show/hide based on breakpoint */
  @media (min-width: 48rem) {
    /* 768px */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      grid-auto-rows: 1fr;
    }
    .cards-slider {
      display: none;
    }
  }

  /* Grid spacing for 3x2 layout */
  @media (min-width: 64rem) {
    /* 1024px */
    .card-grid {
      gap: 1.5rem;
    }
    .card .card-media img {
      height: 200px;
    }
  }

  /* Blaze nav styling shown only on mobile */
  @media (max-width: 47.999rem) {
    .blaze-nav {
      display: grid;
      grid-template-columns: 2.5rem 1fr 2.5rem;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
      max-width: 500px;
      margin-inline: auto;

      .blaze-pagination {
        @button-size: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        button {
          /* dot style */
          width: @button-size;
          height: @button-size;
          border-radius: 50%;
          background: #e0e0e0;
          border: none;
          position: relative;
          line-height: 0;
          padding: 0;
          /* hide numeric text but keep it for SRs */
          color: transparent;
          font-size: 0; /* fallback hiding */
          text-indent: -9999px; /* extra safety if theme resets font-size */
          overflow: hidden;

          &::before {
            content: "";
            position: absolute;
            inset: 0;
            margin: auto;
            width: @button-size;
            height: @button-size;
            border-radius: 50%;
            background: currentColor;
            /* use currentColor so we can theme via color below */
          }

          color: #e0e0e0; /* base dot color via currentColor */

          &.active {
            color: var(--primary);
            transform: scale(1.15);
          }
        }
      }

      .blaze-prev,
      .blaze-next {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        border: 1px solid #ddd;
        background: #fff;
        position: relative;
        transition:
          border-color 160ms ease,
          background-color 160ms ease;
        &:hover {
          border-color: var(--primary);
          background: #fafafa;
        }
        &:before {
          content: "";
          position: absolute;
          inset: 0;
          margin: auto;
          width: 10px;
          height: 10px;
          border-top: 2px solid var(--headerColor);
          border-right: 2px solid var(--headerColor);
          transform: rotate(45deg);
        }
      }
      .blaze-prev:before {
        transform: rotate(-135deg);
      }
      .blaze-next:before {
        transform: rotate(45deg);
      }
    }
  }
}

/*-- -------------------------- -->
<---     Before/After Gallery    -->
<--- -------------------------- -*/

@media only screen and (min-width: 0rem) {
  #bsp-gallery {
    padding: var(--sectionPadding);
    background: var(--surfaceAlt);

    .cs-container {
      width: 100%;
      max-width: 80rem;
      margin: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(3rem, 6vw, 4rem);
    }

    .gallery-header {
      align-items: center;
      text-align: center;

      .cs-title {
        margin-bottom: 0.5rem;
      }
      .cs-text {
        max-width: 42rem;
      }
    }

    .ba-grid {
      width: 100%;
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      grid-template-columns: 1fr;
      gap: clamp(1rem, 2.5vw, 1.5rem);
    }

    .ba-card {
      background: var(--surface);
      border: 1px solid var(--borderColor);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-xs);
      transition:
        box-shadow 180ms ease,
        transform 180ms ease;

      &:hover {
        box-shadow: var(--shadow-sm);
        transform: translateY(-1px);
      }
    }

    .ba-frame {
      position: relative;
      width: 100%;
      /* 16:10 aspect ratio */
      aspect-ratio: 16 / 10;
      background: #f1f1f1;
      overflow: hidden;
      isolation: isolate; // keeps child z-index self-contained
    }

    .ba-picture {
      position: absolute;
      inset: 0;
      display: block;

      img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }

    // After image is clipped; default at 50%
    .ba-after {
      clip-path: inset(0 50% 0 0);
      transition: clip-path 80ms linear;
      will-change: clip-path;
    }

    .ba-divider {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 50%;
      width: 2px;
      background: rgba(0, 0, 0, 0.2);
      pointer-events: none;
      transition: left 80ms linear;
    }

    .ba-range {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      appearance: none;
      background: transparent;
      cursor: col-resize;
      outline: none;
      z-index: 5;

      // hide default track but keep element focusable
      &::-webkit-slider-runnable-track {
        background: transparent;
      }
      &::-moz-range-track {
        background: transparent;
      }

      // Thumb styled as a grab handle
      &::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 2px solid #fff;
        background: var(--primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      &::-moz-range-thumb {
        width: 28px;
        height: 28px;
        border: 2px solid #fff;
        border-radius: 50%;
        background: var(--primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
    }

    .ba-meta {
      padding: 0.9rem 1rem 1.1rem;

      .ba-title {
        margin: 0 0 0.35rem;
        color: var(--headerColor);
        font-size: 1.0625rem;
        line-height: 1.2;
        font-weight: 700;
      }
      .ba-desc {
        margin: 0;
        color: var(--bodyTextColor);
        font-size: 0.975rem;
        line-height: 1.5;
      }
    }

    .gallery-cta-wrap {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
    }
  }
}

/* Tablet - 768px */
@media only screen and (min-width: 48rem) {
  #bsp-gallery {
    .cs-container {
      gap: clamp(2rem, 4vw, 3rem);
    }

    .ba-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1.25rem;
    }

    .gallery-cta-wrap {
      justify-content: flex-end;
    }
  }
}

/* Desktop - 1024px */
@media only screen and (min-width: 64rem) {
  #bsp-gallery {
    .ba-grid {
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.5rem;
    }
  }
}

/*-- -------------------------- -->
<---       Side By Side         -->
<--- -------------------------- -*/

/* Mobile - 360px */
@media only screen and (min-width: 0rem) {
  #sbs-523 {
    padding: var(--sectionPadding);

    @keyframes floatAnimation {
      0% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-0.6em);
      }
      100% {
        transform: translateY(0);
      }
    }

    @keyframes floatAnimation2 {
      0% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-1em);
      }
      100% {
        transform: translateY(0);
      }
    }

    .cs-container {
      width: 100%;
      /* changes to 1280px at desktop */
      max-width: (550/16rem);
      margin: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      /* 48px - 64px */
      gap: clamp(3rem, 6vw, 4rem);
    }

    .cs-content {
      /* set text align to left if content needs to be left aligned */
      text-align: left;
      width: 100%;
      display: flex;
      flex-direction: column;
      /* centers content horizontally, set to flex-start to left align */
      align-items: flex-start;
    }

    .cs-color {
      color: var(--secondary);
    }

    .cs-text {
      margin-bottom: (16/16rem);

      &:last-of-type {
        margin-bottom: (32/16rem);
      }
    }

    .cs-image-group {
      /* this is how we can scale entire groups using ems.  Font size is tied to the view width, so as the screen gets bigger, so does the font size, and this scales up and down the elements with em values.  Then it stops growing once the font size reaches the defined value of 1em (16px which is default on the html element). Font size changes at desktop */
      font-size: ~"min(2.3vw, .875em)";
      /* all values are done in ems, not rems, so we can scale the group with a font size min/max equation */
      width: (630/16em);
      height: (817/16em);
      /* pushes it to the top in the first position */
      order: -1;
      position: relative;

      &:before {
        content: "";
        width: (186/16em);
        height: (161/16em);
        background: var(--primary);
        opacity: 1;
        display: block;
        position: absolute;
        top: (48/16em);
        left: (40/16em);
        animation-name: floatAnimation;
        animation-duration: 6s;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
        animation-fill-mode: forwards;
      }
    }

    .cs-picture {
      display: block;
      position: absolute;

      img {
        width: 100%;
        height: 100%;
        /* makes it act like a background image */
        object-fit: cover;
        position: absolute;
        top: 0;
        left: 0;
      }
    }

    .cs-picture-large {
      width: (476/16em);
      height: (677/16em);
      top: (70/16em);
      left: (62/16em);
    }

    .cs-picture-small {
      width: (260/16em);
      height: (225/16em);
      background-color: #fff;
      border: (10/16em) solid #fff;
      right: 0;
      bottom: 0;
      animation-name: floatAnimation2;
      animation-duration: 20s;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
      animation-fill-mode: forwards;
    }
  }
}

/* Small Desktop - 1024px */
@media only screen and (min-width: 64rem) {
  #sbs-523 {
    .cs-container {
      max-width: (1280/16rem);
      flex-direction: row;
      justify-content: space-between;
    }

    .cs-content {
      width: 51%;
      max-width: (550/16rem);
    }

    .cs-image-group {
      font-size: ~"min(1.1vw, 1em)";
    }
  }
}

/*-- -------------------------- -->
<---           Steps            -->
<--- -------------------------- -*/

/* Mobile - 360px */
@media only screen and (min-width: 0rem) {
  #steps-1172 {
    padding: var(--sectionPadding);
    position: relative;
    z-index: 1;
    overflow: hidden;

    .cs-container {
      width: 100%;
      /* changes to 1280px at desktop */
      max-width: (704/16rem);
      margin: auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      /* 48px - 64px */
      gap: clamp(3rem, 6vw, 4rem);
    }

    .cs-content {
      /* set text align to left if content needs to be left aligned */
      text-align: center;
      width: 100%;
      display: flex;
      flex-direction: column;
      /* centers content horizontally, set to flex-start to left align */
      align-items: center;
    }

    .cs-text {
      font-size: var(--bodyFontSize);
      line-height: 1.5em;
      text-align: inherit;
      width: 100%;
      max-width: (650/16rem);
      margin: 0;
      color: var(--bodyTextColor);
    }

    .cs-card-group {
      width: 100%;
      margin: 0;
      padding: 0;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: (20/16rem);

      .cs-picture {
        width: (88/16rem);
        height: (88/16rem);
        margin-bottom: (24/16rem);
        border: 1px solid #858585;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    }

    .cs-item {
      text-align: center;
      list-style: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      grid-column: span 12;
      position: relative;

      &:last-of-type {
        &:after {
          display: none;
        }
      }

      &:nth-of-type(even) {
        &:after {
          /* scaleX -1 flips it horizontally */
          transform: rotate(-135deg) scaleX(-1);
        }
      }

      &:after {
        content: "";
        /* 54px - 84px */
        width: clamp(3.375rem, 6vw, 5.25rem);
        height: clamp(3.375rem, 6vw, 5.25rem);
        margin-top: (20/16rem);
        background: url("https://csimg.nyc3.cdn.digitaloceanspaces.com/Icons/curved-arrow-light.svg");
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        opacity: 1;
        display: block;
        position: relative;
        transform: rotate(135deg);
      }
    }

    .finance-banner.cs-picture {
      border: none;
    }

    .cs-icon {
      width: (40/16rem);
      height: auto;
      display: block;
    }

    .cs-h3 {
      font-size: (20/16rem);
      line-height: 1.2em;
      text-align: inherit;
      margin: 0 0 (12/16rem) 0;
      color: var(--headerColor);
    }

    .cs-item-text {
      font-size: (16/16rem);
      line-height: 1.5em;
      text-align: inherit;
      max-width: (342/16rem);
      margin: 0;
      color: var(--bodyTextColor);
    }
  }
}

/* Tablet - 768px */
@media only screen and (min-width: 48rem) {
  #steps-1172 {
    .cs-container {
      /* 16px - 24px left & right */
      padding: 0 clamp(1rem, 2vw, 1.5rem) clamp(1.25rem, 1.3vw, 1.5rem);
    }
    .cs-item {
      grid-column: span 4;

      &:nth-of-type(2) {
        &:after {
          display: none;
        }
      }

      &:nth-of-type(1) {
        &:after {
          transform: rotate(135deg) scaleX(-1);
        }
      }

      &:after {
        margin: 0;
        position: absolute;
        top: 0;
        right: (-40/16rem);
        transform: rotate(45deg);
      }
    }
  }
}

/* Desktop - 1024px */
@media only screen and (min-width: 64rem) {
  #steps-1172 {
    .cs-container {
      max-width: (1280/16rem);
    }

    .cs-item {
      grid-column: span 4;

      &:nth-of-type(2) {
        &:after {
          display: block;
          transform: rotate(45deg);
        }
      }

      &:after {
        right: (-48/16rem);
      }
    }
    .cs-content {
      /* set text align to left if content needs to be left aligned */
      flex-direction: row;
      justify-content: space-between;
      /* centers content horizontally, set to flex-start to left align */

      .content-left {
        text-align: left;
      }
    }
  }
}
